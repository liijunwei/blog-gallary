#!/bin/bash

git add . && git commit -m "Commit manually." --quiet && git push

hexo clean  >/dev/null &&
hexo deploy >/dev/null &&
ssh webuser@xiaoli "cd /srv/www/blog-gallary &&
                    git fetch         &&
                    git checkout main &&
                    git reset --hard HEAD@{u}"

open_tag=$1
[[ $open_tag != "" ]] && open $BLOG_DOMAIN

echo
echo "open $BLOG_DOMAIN" | tee /dev/tty | pbcopy
